# IT Notes (061125)

#it

## Overview

- L2 vs. L3 Switches (Functions, Differences, OSI)
- Firewalls (Functions, Protocols, Policies, Routing Tables)
- PoE, Work, Phone Lines
- IP Classes, Subnets, CIDR
- Fortinet (FortiGate) Firewalls, VPN & VPN Protocols

## L2 vs. L3 Switches

- Open Systems Interconnection Model (OSI Model)
	- OSI is a framework that standardizes the functions of a telecommunication system into different "layers"
- Layers
	- Layer 1 (Physical Layer)
		- Physical transmission of raw bit streams over a physical medium (e.g. cables, connectors)
	- Layer 2 (Data Link Layer)
		- Deals with error-free transmission of data frames between nodes on the same network with **Media Access Control (MAC)** addresses
	- Layer 3 (Network Layer)
		- Responsible for logical coordination and routing of data *packets* across different networks with Internet Protocol (IP) addresses
	- Layer 4 (Transport Layer)
		- Provides end-to-end communication services (e.g. UDP, TCP)
	- Layer 5 (Session Layer)
		- Handles connections between various applications
	- Layer 6 (Presentation Layer)
		- Handles data formatting, encryption and compression
	- Layer 7 (Application Layer)
		- Handles network services to end-user applications
- L2 Switches
	- Operates at **Layer 2 (Data Link Layer)**
	- Forwards data **frames** based on **MAC addresses**
	- L2 switch receives a frame, reads the destination MAC and looks it up in its MAC address table (CAM). 
	- CAM maps MAC addresses to specific *physical* ports on the switch
	- If the address is found, the switch forwards the frame out of the *specific* port
	- If the address is unknown *or* if it's a broadcast address, the switch "floods" the frame out of *all* ports except the port the frame came in on 
		- Broadcasts sent by a single device in a network will be seen by all other devices connected to the L2 switch
	- The work L2 does is simple, which allows it to be generally faster and cheaper than L3
		- Local Area Network (LAN) segmentation allows the L2 switch to segment LANs into smaller domains, improving performance
- L3 Switches
	- Operates at **Layer 2 (Data Link Layer) and Layer 3 (Network Layer)**
		- Layer 2 is used for switching *within* a subnet
		- Layer 3 is used for routing *between* subnets
	- L3 switches have the same capabilities as L2 switches, but they also have **routing** capabilities
		- L3 switches have the ability to forward data **packets** based on **IP addresses**
	- If an L3 switch receives a packet designated for a different network segment (different IP subnet), it uses a **routing table** to determine the best route to its destination
	- L3 switches have the ability to connect to multiple broadcast domains (VLANs), allowing for inter- VLAN routing
		- This routing is usually done with hardware, allowing for faster speeds than external routers 
		- Routing capabilities of the L3 make it more expensive than the L2
- Frames vs. Packets
	- Frames
		- Unit of data at **Layer 2 (Data Link Layer)**
		- Once a *packet* is ready to be sent over a specific *physical* link, it gets encapsulated by the *frame*
		- Includes 
			- Header
				- **Source MAC address** (physical address of sending network interface card) and the **destination MAC address** (physical address of the next device on the local network segment)
				- Also includes preamble for synchronization and type/ length fields
			- Payload
				- Location of the *packet*
				- The entire packet becomes the payload of the frame
			- Trailer
				- Contains error checking information, commonly a **Frame Check Sequence (FCS)** or **Cyclic Redundancy Check (CRC)** to ensure the data wasn't corrupted during transmission over the link
		- Function
			- Frames are responsible for hop-to-hop communication within a single LAN
				- L2 switches forward the frame via the MAC address
				- Once the frame reaches the destination router, the router "unwraps" the packet from the frame, reads it, encapsulates it into a *new* frame for transmission and send it
	- Packets
		- Unit of data at **Layer 3 (Network Layer)**
		- Includes
			- Header
				- Critical information for routing, including the **source IP address** (its origin) and the **destination IP address** (its destination)
				- Also contains other information such as protocol version, time-to-live (TTL) and checksums for error detection
			- Payload
				- Actual information that is being sent (e.g. photo, video, file)
			- Optional Trailer
				- May sometimes included for additional error checking
		- Function
			- Responsible for end-to-end communication across different **routers** that operate at **Layer 3**
				- Routers read the destination IP in the packet header to calculate the best route to the destination 

## Firewalls (Functions, Protocols, Policies, Routing Tables)

- Firewalls
	- Network security device that monitors and controls incoming and outgoing network traffic based on *predetermined* security rules
- Protocols & Policies
	- Protocols
		- Firewalls operate under various network protocols (e.g. TCP, UDP, ICMP, HTTP, HTTPS, FTP, SSH)
		- These rules can be configured to allow or deny traffic based on the protocol being utilized
			- Example
				- A rule may allow outbound web traffic (e.g. HTTP: port 80, HTTPS: port 443), but blocks SSH: port 20 connections from the Internet to internal servers
	- Policies
		- The core of a firewall's operation lies in its security policies or rules
		- Policies are sets of instructions that tell the firewall how to *handle* different types of traffic, in order and from top to bottom
		- Structure
			- Source
				- Origin of the traffic (e.g. specific IP address, IP range, network segment, VLAN)
			- Destination
				- Intended recipient of the traffic
			- Service/ Port
				- Specific protocol and port number (e.g. TCP/80 for HTTP, UDP/53 for DNS)
			- Action
				- What the firewall should do with the traffic (e.g. Allow/ Permit, Deny/ Block, Drop, Reject)
			- Logging
				- Choose to record the event for auditing or troubleshooting
		- Example
			- Policy ABCD (Internet Access for Users)
				- Source
					- Internal VLAN 120 (192.168.xxx/24)
				- Destination
					- Any (Internet)
				- Service
					- HTTP (TCP/80)
					- HTTPS (TCP/443)
					- DNS (UDP/53)
				- Action
					- Allow
				- Log
					- Yes
- Routing Tables
	- Data structure that is stored in a router or **Layer 3** switch that lists pathways to network destinations
	- Map that device uses to determine the best way to forward incoming data packets to their intended destinations
	- Structure
		- Destination Network
			- IP address range of the network that the packet is trying to reach
		- Next Hop
			- IP address of the *next* router or Layer 3 switch that the packet should be sent to on its path to the destination
		- Interface
			- Outgoing network interface on the route/ switch through which the packet should be forwarded
		- Metric/ Cost
			- Value indicating the "cost" or "preference" of the route (lower is usually better), which is often shown when multiple paths to the destination exist
		- Route Type
			- How the route was established/ learned (e.g. C- Connected, S- Static, D- EIGRP, O- OSPF, B- BGP)
	- Example
		- Entry ABCD
			- Destination Network
				- 192.168.120.0/24 (VLAN 120)
			- Next Hop
				- Directly connected
			- Interface
				- Port connected to VLAN 120 L2 switch

## PoE, Work, Phone Lines

  - Power of Ethernet (PoE)
	  - Allows network cables (e.g. Ethernet cables such as Cat5e, Cat6) to carry electric power and data to powered devices (PDs), eliminating the need for separate power outlets and adapters for compatible devices
	  - **Power Sourcing Equipment (PSE)**, usually a device with a PoE enabled switch or a PoE injector injects Direct Current (DC) power onto the data lines of the Ethernet cable
		  - PDs use this power to operate
	  - Applications
		  - (Small) IoT Devices
			  - Sensors, "Smart" Equipment (e.g. lights, voice activated personal devices), Electric Signs
		  - IP Cameras
			  - Useful for surveillance cameras that do not have easy access to power
		  - **Wireless Access Points (WAPs)**
			  - WAPs are often mounted to the ceiling or on high walls, where power outlets are scarce
			  - Example
				  - Navien's "WLCAP" devices (Smart Plus control + Geofencing) most likely fall under this domain and are powered via PoE
		  - **Voice over Internet Protocol (VoIP)**
			  - Simplifies deployment, making it suitable for office installations
			  - Requires only a single cable drop for both data and power, allowing users to make calls over the Internet rather than traditional phone lines
	  - PoE allows for reduced equipment overhead, reduced cabling costs, rapid installation and centralized power management (Uninterrupted Power Supply --> UPS for PoE switches)
  - Work Lines
	  - Term that colloquially refers to *internal corporate networks* or LANs where employees work with and access internal systems
		  - Encompasses computing resources, applications and data that are utilized in day-to-day business operations of an organization
	  - Applications
		  - Work lines apply to workstations, servers, internal databases, printers, internal applications and switches
		  - Example
			  - Vmware vSphere, "Old" File Server and WLCAP would represent a "work" environment 
			  - Corporate internal operations and data reside in this ecosystem, secured behind a firewall equipped with various policies that police the private traffic 
  - Phone Lines
	  - Term that colloquially refers to infrastructure and technology used primarily by VoIP
		  - Businesses rely on VoIP rather than traditional phone lines to leverage existing data networks
	  - Example
		  - WAPs and the general network infrastructure such as L2 switches and VLANs are able to support VoIP usage
		  - A company may choose to use VoIP for its business
			  - If they use VoIP, the phone would connect to the L2 switch, reside in a specific VLAN (e.g. a VLAN designated for "voice") and communicate to an internal network to an **IP PBX (Internet Protocol Private Branch Exchange)**, which is a telephone switchboard that carries voice communication over a network, finally connecting to a telecommunications provider 

## IP Classes, Subnets, CIDR

  - IP Classes
	  - IPv4 addresses were previously divided into *classes* to categorize networks based on their size, a practice known as **classful addressing**
		  - This practice is largely rendered obsolete by CIDR, but a lot companies still rely on older companies, making them still relevant in our case
	  - Classes
		  - Class A
			  - IP Range
				  - **1.0.0.0 to 126.255.255.255**
			  - Default Subnet Mask
				  - **255.0.0.0 (/8)**
			  - Purpose
				  - Used for large networks
				  - First octet *defines* the network
				  - Remaining 24 bits are designated for hosts, allowing for approximately 16 million hosts per network
		  - Class B
			  - IP Range
				  - **128.0.0.0 to 191.255.255.255**
			  - Default Subnet Mask
				  - **255.255.0.0 (/16)**
			  - Purpose
				  - Used for medium networks
				  - First *two* octets define the network
				  - Remaining 16 bits are designated for hosts, allowing for approximately 65,000 hosts per network
		  - Class C
			  - IP Range
				  - **192.0.0.0 to 223.255.255.255**
			  - Default Subnet Mask
				  - **255.255.255.0 (/24)**
			  - Purpose
				  - Used for small networks
				  - First *three* octets define the network
				  - Remaining 8 bits are designated for hosts, allowing for 254 hosts per network
		  - Class D (Multicast)
			  - IP Range
				  - **224.0.0.0 to 239.255.255.255**
			  - Default Subnet Mask
				  - X
			  - Purpose
				  - Used for multicasting (one-to-many)
		  - Class E (Experimental)
			  - IP Range
				  - **240.0.0.0 to 255.255.255.255**
			  - Default Subnet Mask
				  - X
			  - Purpose
				  - Reserved for experimental use
	  - Obsolescence
		  - The main limitation of classful addressing is the inefficiency and IP address exhaustion 
		  - Network blocks were assigned with fixed sizes, which meant that an organization that required 300 IP addresses couldn't use a Class C (254 hosts) and had to adopt a Class B (~ 65,000 hosts), which was incredibly wasteful and quickly depleted the IPv4 address space
  - Subnets (Subnetting)
	  - Subnetting is a practice of dividing large IP networks into smaller and manageable subnetworks (hence the name, subnets)
	  - This is done by "borrowing" bit from the host portion of an IP address to create additional network bits 
	  - Application
		  - Reduced Broadcast Traffic
			  - Smaller subnets allow for smaller broadcast domains, reducing network congestion
			  - Messages would be sent to the people that need them, not everyone in the network
		  - Improved Security
			  - Network segmentation allows for more granular control over traffic flow between different segments (departments), enhancing security
		  - Efficient IP Address Utilization
			  - Allows for better IP allocation within an organization, reducing inefficiencies
		  - Easier Management
			  - Breaking down a large network into smaller and manageable pieces make it easier to troubleshoot
	  - Function
		  - **Subnet masks** are *32 bit* numbers that distinguish the network portion of an IP address from the host portion
			  - They are often represented in dotted- decimal notation (e.g. 255.255.255.0) or in CIDR notation (e.g. /24)
			  - Bits in the subnet mask that are set to **1** indicate the *network* portion, bits that are set to **0** indicate the *host* portion
		  - Example
			  - Network Information
				  - 89.248.22.160
			  - Subnet Mask
				  - 255.255.255.248
				  - Binary of the above is **11111111.11111111.11111111.11111000**
				  - 29 **1's** are present in the binary representation, which means it's a */29* subnet (in CIDR)
			  - Subnet Capabilities
				  - $2 ^ {(32 - 29)} - 2 = 6$
				  - This subnet can accommodate **6** usable host IP addresses (network & broadcast addresses are reserved, which is why we subtract **2**)
  - **Classless Inter-Domain Routing (CIDR)**
	  - Method for allocating IP addresses and routing IP *packets* that replaced the classful addressing system
	  - X
	  - 

## Fortinet (FortiGate) Firewalls, VPN & VPN Protocols

- 